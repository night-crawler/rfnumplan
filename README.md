## rfnumplan
Django-батарейка для поиска диапазонов по плану нумерации http://www.rossvyaz.ru/activity/num_resurs/registerNum/

#### Dependencies
- phonenumbers
- requests
- django
- python-dateutil
- terminaltables

---

##### Поиск диапазонов и операторов по номерам
```
$ ./manage.py rfnumplan +79251234567 84955071234
```
![Поиск по диапазону номеров](https://cloud.githubusercontent.com/assets/1235203/16502381/c48d5f02-3f16-11e6-84a4-5d63949d7c67.png)

---

##### Список префиксов с количеством диапазонов в них

```
$ ./manage.py rfnumplan --range-summary --plan=3xx
```
```
┌Plan range prefixes summary───────┐
│ Numbering plan │ # │ ### │ Count │
├────────────────┼───┼─────┼───────┤
│ 3xx            │ 7 │ 343 │ 24327 │
│ 3xx            │ 7 │ 347 │ 9732  │
│ 3xx            │ 7 │ 351 │ 1962  │
│ 3xx            │ 7 │ 383 │ 1871  │
│ 3xx            │ 7 │ 391 │ 1764  │
│ 3xx            │ 7 │ 384 │ 1755  │
│ 3xx            │ 7 │ 385 │ 1339  │
│ 3xx            │ 7 │ 342 │ 1307  │
│ 3xx            │ 7 │ 346 │ 1047  │
│ 3xx            │ 7 │ 395 │ 1007  │
│ 3xx            │ 7 │ 365 │ 960   │
│ 3xx            │ 7 │ 345 │ 835   │
│ 3xx            │ 7 │ 381 │ 710   │
│ 3xx            │ 7 │ 349 │ 707   │
│ 3xx            │ 7 │ 341 │ 685   │
│ 3xx            │ 7 │ 352 │ 622   │
│ 3xx            │ 7 │ 353 │ 435   │
│ 3xx            │ 7 │ 382 │ 433   │
│ 3xx            │ 7 │ 302 │ 401   │
│ 3xx            │ 7 │ 301 │ 356   │
│ 3xx            │ 7 │ 394 │ 143   │
│ 3xx            │ 7 │ 388 │ 126   │
│ 3xx            │ 7 │ 390 │ 122   │
│ 3xx            │ 7 │ 336 │ 23    │
└────────────────┴───┴─────┴───────┘
```
---
##### Обновление с сайта Россвязи

```
./manage.py rfnumplan --update --force
```

![Загрузка плана нумерации с сайта rossvyaz](https://cloud.githubusercontent.com/assets/1235203/16502698/5674eaa6-3f18-11e6-8765-6821782313cc.png)

---
##### Поиск диапазонов по региону и оператору

```
./manage.py rfnumplan --plan=9xx --operator=Т2 --region=Москва
./manage.py rfnumplan --plan=9xx --operator="Мобильные ТелеСистемы"
./manage.py rfnumplan --plan=9xx --region=Москва --region=Петербург --operator=скар

```
![Поиск диапазонов по региону и оператору](https://cloud.githubusercontent.com/assets/1235203/16522216/fe590f90-3fa4-11e6-95ab-c38c757337ca.png)

```
$ ./manage.py rfnumplan --plan=9xx --region=моск -p1
┌Numbering plan ranges [x554], page 1 of 28─────────────────────────────────────┬────────────────────────────────┐
│ # │ ### │ Start   │ End     │ Capacity │ Operator                             │ Region                         │
├───┼─────┼─────────┼─────────┼──────────┼──────────────────────────────────────┼────────────────────────────────┤
│ 7 │ 900 │ 5550000 │ 5555549 │ 5550     │ ООО "СИМ ТЕЛЕКОМ"                    │ г. Москва и Московская область │
│ 7 │ 900 │ 5555550 │ 5555550 │ 1        │ ООО "СИМ ТЕЛЕКОМ"                    │ г. Москва и Московская область │
│ 7 │ 900 │ 5555551 │ 5559999 │ 4449     │ ООО "СИМ ТЕЛЕКОМ"                    │ г. Москва и Московская область │
│ 7 │ 900 │ 6110000 │ 6199999 │ 90000    │ ООО "СИМ ТЕЛЕКОМ"                    │ г. Москва и Московская область │
│ 7 │ 900 │ 7000000 │ 7499999 │ 500000   │ ООО "Антарес"                        │ г. Москва и Московская область │
│ 7 │ 900 │ 9000000 │ 9009999 │ 10000    │ ООО "Газпром телеком"                │ г. Москва и Московская область │
│ 7 │ 901 │ 1800000 │ 1899999 │ 100000   │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 2020000 │ 2029999 │ 10000    │ ОАО "Межрегиональный ТранзитТелеком" │ г. Москва                      │
│ 7 │ 901 │ 4000000 │ 4099999 │ 100000   │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 4200000 │ 4299999 │ 100000   │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 4610000 │ 4619999 │ 10000    │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 4640000 │ 4649999 │ 10000    │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 4700000 │ 4709999 │ 10000    │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 5000000 │ 5999999 │ 1000000  │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 7000000 │ 7999999 │ 1000000  │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 9000000 │ 9099999 │ 100000   │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 901 │ 9820000 │ 9839999 │ 20000    │ ООО "Т2 Мобайл"                      │ г. Москва и Московская область │
│ 7 │ 903 │ 0000000 │ 0199999 │ 200000   │ ОАО "Вымпел-Коммуникации"            │ г. Москва и Московская область │
│ 7 │ 903 │ 1000000 │ 1999999 │ 1000000  │ ОАО "Вымпел-Коммуникации"            │ г. Москва и Московская область │
│ 7 │ 903 │ 2000000 │ 2999999 │ 1000000  │ ОАО "Вымпел-Коммуникации"            │ г. Москва и Московская область │
└───┴─────┴─────────┴─────────┴──────────┴──────────────────────────────────────┴────────────────────────────────┘
```

---

##### Конвертирование диапазонов в префиксы с сохранением в csv

```
$ ./manage.py rfnumplan --prefixes --plan=9xx --region=моск --operator=скарт -lru

```
![Конвертирование диапазона плана нумерции в префиксы](https://cloud.githubusercontent.com/assets/1235203/16536821/305c668a-4000-11e6-944c-43f23725b293.png)
